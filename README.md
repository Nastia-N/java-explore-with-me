# java-explore-with-me
Афиша событий  
Сервис для организации досуга: позволяет находить компанию для участия в событиях.

## Архитектура
Проект состоит из двух микросервисов:

#### Основной сервис (ewm-main-service) — порт 8080  
Три уровня доступа:  
Публичный API — поиск событий, просмотр категорий и подборок  
Закрытый API — личный кабинет пользователя (мои события, заявки)  
Административный API — модерация контента, управление системой

#### Сервис статистики (stats-service) — порт 9090  
Сбор данных о просмотрах событий  
Аналитика популярности контента  
Подсчёт уникальных посещений

## Ключевые возможности
#### Для пользователей:  
Поиск событий — фильтрация по категориям, дате, локации, оплате  
Создание мероприятий — от концертов до спортивных мероприятий  
Участие в событиях — подача заявок, подтверждение участия  
Рейтинги — оценка событий лайками/дизлайками (дополнительная функциональность)

#### Для организаторов:  
Управление событиями — редактирование, отмена, просмотр заявок  
Контроль участия — модерация заявок, установка лимитов  
Статистика — просмотры, подтверждённые участники

#### Для администраторов:  
Управление пользователями — регистрация, блокировка  
Категории и подборки — структурирование контента  
Модерация событий — публикация/отклонение мероприятий

## Особенности реализации 
Контроль пересечений: сервер проверяет, чтобы события не пересекались по времени для одного пользователя  
Авторасчёт продолжительности: длительность события рассчитывается на основе времени начала и окончания  
Приоритетный список: все события пользователя сортируются по времени начала  
Валидация сроков: нельзя создать событие менее чем за 2 часа до его начала

Интеграция с сервисом статистики: отдельный микросервис для сбора данных о просмотрах  
Подсчёт уникальных посещений: учёт только уникальных IP-адресов  
Проверка прав: нельзя участвовать в своём событии или отменять чужие заявки  
Уникальность оценок: один пользователь — одна оценка на событие  

## Технический стек
Backend: Java 21, Spring Boot, Spring Data JPA  
Базы данных: PostgreSQL  
Сборка: Maven  
Контейнеризация: Docker, Docker Compose  
Документация: Swagger UI (OpenAPI 3.0)  
Тестирование: Postman  
Система контроля версий: Git

## Системные требования
Java 21 (или выше)  
Docker и Docker Compose (для запуска в контейнерах)  
Maven 3.8+ (для сборки из исходного кода)  
PostgreSQL 14+ (если запуск без Docker)

## Запуск проекта (Docker Compose)

#### Самый быстрый способ развернуть все сервисы и базы данных
Клонировать репозиторий:  
bash  
git clone https://github.com/Nastia-N/java-explore-with-me.git  
cd java-explore-with-me

Запустить контейнеры:  
bash  
docker-compose up -d  

Проверить работу сервисов:  
Основной сервис: http://localhost:8080  
Сервис статистики: http://localhost:9090  
Swagger UI (документация API): http://localhost:8080/swagger-ui.html  

Остановить контейнеры:  
bash  
docker-compose down  

#### Сборка и запуск без Docker
Установите PostgreSQL и создайте две БД: ewm_main и stats.  
Настройте подключение в application.yml для каждого сервиса.

Соберите проекты:  
bash  
mvn clean package  

Запустите сервисы:  
bash  
java -jar ewm-main-service/target/*.jar  
java -jar stats-service/target/*.jar
